---
layout: post
title: Configuring Mutt for Spam
date: 2011-03-23 11:49:14.000000000 +00:00
type: post
published: true
status: publish
categories:
- linux
- technology
tags:
- mutt
- spam
- spamassassin
meta:
  _edit_last: '20992958'
  reddit: a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1311597017";}
  _wpas_done_twitter: '1'
  tagazine-media: a:7:{s:7:"primary";s:0:"";s:6:"images";a:0:{}s:6:"videos";a:0:{}s:11:"image_count";s:1:"0";s:6:"author";s:8:"20992958";s:7:"blog_id";s:8:"20408733";s:9:"mod_stamp";s:19:"2011-03-23
    11:51:44";}
  _wpas_skip_5246225: '1'
  _wpas_skip_687483: '1'
author:
  login: chrisjrob
  email: chrisjrob@gmail.com
  display_name: chrisjrob
  first_name: ''
  last_name: ''
---
<p>I have been using Mutt for some time, but have always found it a pain for handling spam, so I finally spent the time yesterday to work out how to do it. The surprising thing is that there seemed to be different and confusing advice on how to achieve this. The best information turned out to be the <a href="http://wiki.mutt.org/?MuttGuide/Macros">Mutt manual</a> itself, which is a great example of how open source documentation should be.</p>
<p>My folder layout is that I have a Spam folder, within which I have two folders - Spam/Ham and Spam/Verified. The Spam/Ham are good emails, particularly those that have been wrongly identified as Spam. The Spam/Verified are the Spam that I am confirming are definitely Spam. <!--more-->SpamAssassin places all the detected Spam in the Spam folder. I generally move all the Spam folder into Spam/Verified except the one or two false positives, which I move to Spam/Ham. Then overnight <a href="http://spamassassin.apache.org/">SpamAssassin</a> learns from those two folders - a fairly standard SpamAssassin layout I think.</p>
<p>Occasionally we get Spam in our Inbox, and obviously these can be moved straight to the Spam/Verified folder.</p>
<p>The important factor here is that I want to be able to easily flag individual emails in my Inbox as Spam, but I also want to be able to tag the whole of my Spam folder and flag as Spam.</p>
<p>The manual gives a <a href="http://www.mutt.org/doc/devel/manual.html#functions">list of functions</a>, which I used rather than the normal key bindings, as the manual advises that this is more portable and robust. I used the &lt;tag-prefix&gt; command to enable tagging. I was not using the keys H nor S, so I chose these as Ham and Spam respectively.</p>
<p>You need two macros for each function - one for use in the folder list (index) and one for use inside an email message (pager), so that you can flag it as Spam without moving back to the message list.</p>
<p>The biggest problem I encountered was the difficulty that removing the unread flag resulted in the selection moving down to the next email, and then the next email would be flagged as Spam - frustrating. The only solution seemed to be modify the muttrc configuration before and after, and almost unbelievably that is in fact possible using the  function.</p>
<p>The final macros are shown below:</p>
<pre># Move message(s) to Spam/Verified by pressing "S"
macro index S "&lt;tag-prefix&gt;&lt;enter-command&gt;unset resolve&lt;enter&gt;&lt;tag-prefix&gt;&lt;clear-flag&gt;N&lt;tag-prefix&gt;&lt;enter-command&gt;set resolve&lt;enter&gt;&lt;tag-prefix&gt;&lt;save-message&gt;=INBOX/Spam/Verified&lt;enter&gt;" "file as Spam"
macro pager S "&lt;save-message&gt;=INBOX/Spam/Verified&lt;enter&gt;" "file as Spam"
# Move message(s) to Spam/Ham by pressing "H"
macro index H "&lt;tag-prefix&gt;&lt;enter-command&gt;unset resolve&lt;enter&gt;&lt;tag-prefix&gt;&lt;clear-flag&gt;N&lt;tag-prefix&gt;&lt;enter-command&gt;set resolve&lt;enter&gt;&lt;tag-prefix&gt;&lt;save-message&gt;=INBOX/Spam/Ham&lt;enter&gt;" "file as Ham"
macro pager H "&lt;save-message&gt;=INBOX/Spam/Ham&lt;enter&gt;" "file as Ham"
# Return to Inbox by pressing "."
macro index . "&lt;change-folder&gt;=INBOX&lt;enter&gt;" "Inbox"</pre>
<p>Suddenly Mutt is the easiest way for me to handle by Spam.</p>
