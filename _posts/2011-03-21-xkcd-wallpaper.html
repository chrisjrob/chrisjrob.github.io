---
layout: post
title: XKCD Wallpaper
date: 2011-03-21 21:34:47.000000000 +00:00
type: post
published: true
status: publish
categories:
- linux
- technology
tags:
- curl
- pekwm
- perl
- xkcd
meta:
  _edit_last: '20992958'
  _wpas_done_twitter: '1'
  tagazine-media: a:7:{s:7:"primary";s:63:"http://chrisjrob.files.wordpress.com/2011/03/xkcd-wallpaper.png";s:6:"images";a:1:{s:63:"http://chrisjrob.files.wordpress.com/2011/03/xkcd-wallpaper.png";a:6:{s:8:"file_url";s:63:"http://chrisjrob.files.wordpress.com/2011/03/xkcd-wallpaper.png";s:5:"width";s:4:"1280";s:6:"height";s:3:"800";s:4:"type";s:5:"image";s:4:"area";s:7:"1024000";s:9:"file_path";s:0:"";}}s:6:"videos";a:0:{}s:11:"image_count";s:1:"1";s:6:"author";s:8:"20992958";s:7:"blog_id";s:8:"20408733";s:9:"mod_stamp";s:19:"2011-03-21
    21:43:38";}
  reddit: a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1311597017";}
author:
  login: chrisjrob
  email: chrisjrob@gmail.com
  display_name: chrisjrob
  first_name: ''
  last_name: ''
---
<p>I confess, I like <a href="http://xkcd.com/">XKCD</a>.  Even though some of them are <a href="http://xkcd.com/871/">unfunny</a> and others <a href="http://xkcd.com/849/">beyond my understanding</a>, sometimes, just sometimes, they <a href="http://xkcd.com/208/">strike a chord</a>.</p>
<p>Once I <a href="/tag/pekwm">moved to pekwm</a> I found myself with a black plain desktop, what could be better, I thought, than the current XKCD comic in the centre, with the tooltip comment located underneath in an appropriate font.<br />
<!--more--><br />
<img src="{{ site.baseurl }}/assets/xkcd-wallpaper.png" alt="XKCD Wallpaper Screenshot" />After some trial and error, I ended up writing <a href="http://pastebin.com/vqtmyRWW">this script</a>.  It is far from perfect, and will probably end up being broken at some point, although it survived <a href="http://xkcd.com/859/">its first trial</a> unscathed.  I'm a little embarrassed by my tortuous curl/perl one-liner, ideally I would re-write this whole thing in perl, but it has worked reliably for a couple of months, so I dare say that I will never get around to it.</p>
<p>Currently it works for pekwm, and I dare say it will work for other lightweight window managers, like openbox, that can use <code>feh</code> to set the desktop wallpaper.  If not, then it shouldn't be too difficult to modify the script for your window manager or desktop environment.  You can also run the script without the <code>-w</code> switch in order to just create the XKCD image in the directory for your own purposes.</p>
<p>You will obviously need <code>perl, curl, wget, and fold</code>, if they aren't already installed on your system.  Create a directory, say <code>~/.xkcd</code> and save this script in there, along with the <a href="http://antiyawn.com/uploads/Humor-Sans.ttf">XKCD font</a>, mark the script as executable.  If you read the script, it is fairly self-explanatory I think.</p>
<p>You basically run it like this:</p>
<p><code>/path/to/.xkcd/xkcd -w -d '/path/to/.xkcd'</code></p>
<p>For pekwm, just add a line at the end of the <code>~/.pekwm/start</code> file:</p>
<p><code>(sleep 30 &amp;&amp; /path/to/.xkcd/xkcd -w -d '/path/to/.xkcd') &amp;</code></p>
<p>I hope it works for you, feel free to comment any suggestions or criticisms.  If you do start using it, it would be fantastic if you could add a comment to let me know.</p>
