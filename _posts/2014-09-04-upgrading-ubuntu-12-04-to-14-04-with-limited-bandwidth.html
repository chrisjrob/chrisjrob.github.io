---
layout: post
title: Upgrading Ubuntu 12.04 to 14.04 with limited bandwidth
date: 2014-09-04 13:04:00.000000000 +01:00
type: post
published: true
status: publish
categories: []
tags:
- apt
- linux
- trickle
- ubuntu
meta:
  _wpas_skip_linkedin: '1'
  _wpas_skip_tumblr: '1'
  _wpas_skip_path: '1'
  _edit_last: '20992958'
  _publicize_pending: '1'
  publicize_google_plus_url: https://plus.google.com/112653355770650909703/posts/WpfADLTWWnW
  _wpas_skip_8247391: '1'
  _wpas_done_8247386: '1'
  _publicize_done_external: a:1:{s:11:"google_plus";a:1:{s:21:"112653355770650909703";b:1;}}
  publicize_twitter_user: chrisjrob
  publicize_twitter_url: http://t.co/cNMhoAwAIE
  _wpas_done_8247381: '1'
  _wpas_skip_facebook: '1'
  _wpas_skip_8247386: '1'
  _wpas_skip_8247381: '1'
author:
  login: chrisjrob
  email: chrisjrob@gmail.com
  display_name: chrisjrob
  first_name: ''
  last_name: ''
---
<p><img class="alignright size-medium wp-image-1376" src="{{ site.baseurl }}/assets/ubuntu-1404-desktop.png?w=300" alt="ubuntu-1404-desktop" width="300" height="168" />Upgrading Ubuntu at work can make you rather unpopular, as the Internet bandwidth is fully utilised downloading all the updates to packages you have long since forgotten that you installed.</p>
<p>It also takes time, time that you should be working rather than upgrading your computer.</p>
<p>For these reasons I like to trickle download the upgrade over a day and only perform the actual upgrade once all the packages are ready, typically the following morning.</p>
<p>This is how I performed my low-bandwidth upgrade…</p>
<p><!--more--></p>
<p><strong>N.B. This is not the official or recommended way of upgrading between Ubuntu versions. Specifically my method involves manually disabling some repositories and updating others to the new release. This would normally be done by the do-release-upgrade program itself. It works for me, but please do be aware that you are deviating slightly from the official method.</strong></p>
<p> </p>
<h2>Step 1: Disable 3rd Party Repositories</h2>
<p>Launch the Ubuntu Software Centre and from the menu select <strong>Edit</strong> followed by <strong>Software Sources</strong>. Under the <strong>Other Software</strong> tab please untick all active repositories.</p>
<p>(This step should in any case be done automatically by step 4).</p>
<h2>Step 2: Update Repositories</h2>
<p>Edit /etc/apt/sources.list and replace all occurrences of  "precise" with "trusty". If you are of a brave disposition, the following command should do this for you:</p>
<pre>sed -i.bak 's/precise/trusty/g' sources.list</pre>
<p>(This will create a copy of sources.list to sources.list.bak, in case you wish to reverse this.)</p>
<h2>Step 3: Download Packages</h2>
<p>Still in the terminal, type:</p>
<pre>sudo apt-get update<br />sudo apt-get -o Acquire::http::Dl-Limit=64 -d dist-upgrade</pre>
<p>The 64 will limit the bandwidth to 64 Kbps, please adjust to suit your available bandwidth. The "-d" will instruct apt-get to merely download the packages and not to install them.</p>
<p>I believe this stage can be aborted with Ctrl+C at any time and run again, until such time as all the required packages are downloaded.</p>
<h2>Step 4: Upgrade</h2>
<p>Still in the terminal, I tend to use GNU Screen for extra resilience, type:</p>
<pre>sudo do-release-upgrade</pre>
<h2>Conclusion</h2>
<p>I am typing this on my newly upgraded 14.04 installation, after a clean and trouble-free reboot and an entirely fault-free upgrade.</p>
<p>The truly astonishing aspect to an upgrade is the fact that the computer remains largely usable throughout. I lost my fonts briefly in one application during Step 4, but otherwise I was able to work normally. It didn't even seem to be slowing my computer down greatly, although this is a fairly powerful workhorse, so your mileage may vary.</p>
<p>Please do comment, if you feel I've left anything out in the above, or indeed if you have found it useful.</p>
<p>Good luck with your upgrade.</p>
