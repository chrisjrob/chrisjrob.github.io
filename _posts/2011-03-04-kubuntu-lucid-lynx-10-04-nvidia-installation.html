---
layout: post
title: Kubuntu Lucid Lynx 10.04 Nvidia Installation
date: 2011-03-04 23:03:49.000000000 +00:00
type: post
published: true
status: publish
categories:
- linux
- technology
tags:
- kubuntu
- linux
- nvidia
- ubuntu
meta:
  _edit_last: '20992958'
  _wpas_done_twitter: '1'
  reddit: a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1300097801";}
author:
  login: chrisjrob
  email: chrisjrob@gmail.com
  display_name: chrisjrob
  first_name: ''
  last_name: ''
---
<p>After updating my Kubuntu Mythbuntu Home Theatre PC (see <a title="bootpolish blog" href="http://bootpolish.net/home_blog">my old blog for details</a>), it failed to boot into KDE, leaving me instead at a text login. &nbsp;Fixing the problem was not difficult, but I actually had problems finding the correct instructions, and all the instructions that I did find left out a crucial step. &nbsp;I thought I would write up what I did largely for my own benefit:<!--more--></p>
<p>Firstly, I tried to load the nvidia module:</p>
<pre>NVIDIA: Failed to load the NVIDIA kernel module. Please check your
system's kernel log for additional error messages.
Failed to load module&nbsp; "nvidia"</pre>
<p>Clearly the correct nvidia driver for this kernel is missing. &nbsp;If it was working and an update has messed it up for you, then possibly you have had a kernel update and don't have the correct kernel headers installed. &nbsp;The kernel headers are needed by dkms to rebuild the nvidia module. &nbsp;If you're lucky, you may just be able to install the Linux kernel headers and reboot:</p>
<pre>$ sudo apt-get install linux-headers-`uname -r`
$ sudo shutdown -r now</pre>
<p>With luck dkms will have rebuilt the nvidia module and all will be well. &nbsp;If it hasn't worked, then we need to take more dramatic action. &nbsp;Let's start with an nvidia-free zone:</p>
<pre>$ sudo apt-get purge nvidia*</pre>
<p>Next we should ensure that the nouveau module is blacklisted, so that we do not end up fighting the open source nouveau driver:</p>
<pre>$ sudo vim /etc/modprobe.d/blacklist.conf
blacklist nouveau
blacklist vga16fb</pre>
<p>Now we can install the latest nvidia modules:</p>
<pre>$ sudo apt-get install nvidia-current nvidia-settings nvidia-kernel-common</pre>
<p>And run the nvidia configurator:</p>
<pre>$ sudo nvidia-xconfig</pre>
<p>Finally reboot, and in theory the nvidia module should be rebuilt by dkms:</p>
<pre>$ sudo shutdown -r now</pre>
<p>After the reboot, it may be all working, but we can check that the nvidia module has been loaded:</p>
<pre>$ lsmod | grep nvidia
nvidia 10832442 28</pre>
<p>If this returns nothing, then it has not worked, if it returns "nvidia" as above, then you should have a working system.</p>
