---
layout: post
title: Windows 7 fails to read an NTFS drive twice
date: 2011-03-20 21:16:58.000000000 +00:00
type: post
published: true
status: publish
categories:
- technology
tags:
- sata
- usb
- windows7
meta:
  _edit_last: '20992958'
  tagazine-media: a:7:{s:7:"primary";s:0:"";s:6:"images";a:0:{}s:6:"videos";a:0:{}s:11:"image_count";s:1:"0";s:6:"author";s:8:"20992958";s:7:"blog_id";s:8:"20408733";s:9:"mod_stamp";s:19:"2011-03-21
    08:39:41";}
  _wpas_done_twitter: '1'
  reddit: a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1304390024";}
author:
  login: chrisjrob
  email: chrisjrob@gmail.com
  display_name: chrisjrob
  first_name: ''
  last_name: ''
---
<p>My brother-in-law's Buffalo HS-DH500GL NAS (network attached storage) has failed, it responds to pings, but cannot be accessed via the web interface, nor by the Windows client software.  We reset the device on multiple occasions, but the reset failed to change the IP address to the default.  We noticed that the rear fan is not working, which suggests that the device is not in the best of health.</p>
<p>So we took the drive out of the NAS <!--more-->and I used a <a href="http://www.amazon.co.uk/gp/product/B001A5SK56/ref=as_li_ss_tl?ie=UTF8&amp;tag=robsquadnet-21&amp;linkCode=as2&amp;camp=1634&amp;creative=19450&amp;creativeASIN=B001A5SK56">USB to SATA cable</a> to mount the drive on my Debian Squeeze laptop.  All worked just fine, I could browse his music and pictures, but there wasn't much I could do to recover his 200GB of music and pictures; I hadn't brought an external USB drive with me (note to self: <a href="http://www.amazon.co.uk/gp/product/B001A5SK56/ref=as_li_ss_tl?ie=UTF8&amp;tag=robsquadnet-21&amp;linkCode=as2&amp;camp=1634&amp;creative=19450&amp;creativeASIN=B001A5SK56">buy a second cable</a>), and we were unable to share a Windows directory with my laptop, for the simple reason that my laptop did not have samba installed, and his Vodafone 3G broadband was not functioning.  Yes, it was one of those days.</p>
<p>Simple enough, we thought, we would just plug the USB to SATA cable into his Windows 7 laptop instead.  Unfortunately it seems that, despite working out of the box on Linux, it requires a driver installed under Windows 7. A driver which I did not have with me, and of course our 3G connection was still down at this point; so I could not download it (even if I could track it down).</p>
<p>Fortunately we had a spare SATA desktop PC, with a spare place for a hard drive.  He did not wish to use Linux, so installed Windows 7.  We then plugged in the SATA drive, enabled it in the BIOS, and rebooted.  The drive and its partitions were detected, but not assigned a drive letter.  We went into drive management, but the option to assign a drive letter was disabled.  Clearly there was something adrift with the drive that was preventing it from being mounted in Windows 7.</p>
<p>What I would then have done was use a Linux live CD to boot onto this SATA PC, mount both drives and simply copy the data across, but time had beaten us - they needed to go to his parents, and we had to leave it at that.  He decided to take the drive into work and get one of his technical people to recover his data onto a fresh drive.</p>
<p>What a frustrating few hours, and it would have been trivial to fix on a Linux network, firstly because the drive would have just mounted fine (which it did on my laptop), secondly because I could have trivially created an NFS share (okay unfair - as it wasn't Windows fault that I didn't have the samba installed), or thirdly I could just have used dd with ssh to transfer the drive image to another computer on the network.</p>
<p>Working on a Windows network is like having one arm tied behind your back.  Working on a Windows network without functioning broadband is like having one arm tied behind your back whilst wearing a blindfold.</p>
<p>I need a beer.</p>
