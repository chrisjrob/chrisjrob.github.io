---
layout: post
title: Moving from KeePassX to CLI Password Safe using Vim and GPG
date: 2011-05-04 20:36:48.000000000 +01:00
type: post
published: true
status: publish
categories:
- debian
- linux
- technology
tags:
- pwgen
- vim gpg gnupg debian keepassx shred password
meta:
  tagazine-media: a:7:{s:7:"primary";s:0:"";s:6:"images";a:0:{}s:6:"videos";a:0:{}s:11:"image_count";s:1:"0";s:6:"author";s:8:"20992958";s:7:"blog_id";s:8:"20408733";s:9:"mod_stamp";s:19:"2011-05-04
    20:36:48";}
  _wpas_done_twitter: '1'
  _edit_last: '20992958'
  reddit: a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1304546403";}
  _oembed_d93672995b4d79070efc3e6a54ddce27: "{{unknown}}"
author:
  login: chrisjrob
  email: chrisjrob@gmail.com
  display_name: chrisjrob
  first_name: ''
  last_name: ''
---
<p>The more that I work from the command line, the more of a nuisance I find it that all my passwords are in <a href="http://www.keepassx.org" title="KeePassX">KeePassX</a> - an excellent GUI application.</p>
<p>For some time I have intended moving to pwsafe, but am put off by the time it will take to migrate the data.  An alternative is to export the KeePassX data into an encrypted text file and use the gnupg.vim Vim plugin to read and edit it.  This post describes how to accomplish this in a very few steps.<br />
<!--more--><br />
I first ran KeePassX and deleted the backup group (as I did not wish to export all my previous generations of passwords).  I then exported the contents to a text file named "passwords" (you could be more imaginative/secure if you wish!).  Then I followed <a href="http://awesometrousers.net/post/vim-with-gpg-file-encryption/">these instructions</a> to create a GPG secured file:</p>
<p><code>$ gpg -c --cipher-algo AES256 passwords</code></p>
<p>And enter your secure passphrase twice.  You should now have a new password file "passwords.gpg".  You can now remove the plain text version:</p>
<p><code>$ shred --remove passwords</code></p>
<p>In order to edit/view the new passwords.gpg file, we need the Vim gnupg.vim plugin, which is available in the debian vim-scripts package:</p>
<p><code>$ sudo apt-get install vim-scripts</code></p>
<p>Then edit /etc/vim/vimrc.local to add the following line:</p>
<p><code>set runtimepath+=/usr/share/vim-scripts/</code></p>
<p>This will import all of the vim-scripts plugins, which may not be what you want.  Alternatively you could probably just copy or perhaps symlink the gnupg.vim plugin to your ~/.vim/plugin/ folder.</p>
<p>And that is it - now whenever you wish to view or edit your passwords you simply type:</p>
<p><code>$ vim passwords.gpg</code></p>
<p>This will prompt you for your password and open the file.</p>
<p>Initially I found this gave errors in relation to "exuberant ctags", which I suspect is related to vim-scripts and not to gnupg.vim and is doubtless a feature of the way I have just pulled in all of the vim-scripts.  One option (and what I did) is just to install exuberant-ctags as follows:</p>
<p><code>$ sudo apt-get install exuberant-ctags</code></p>
<p>Now I just have to format passwords.gpg into something a bit more structured, perhaps with Vim folding configured.</p>
<p>And if you are looking for a way to create passwords, the pwgen is one option - it offers a selection of fairly memorable passwords from which to choose.</p>
<p><code>$ sudo apt-get install pwgen</code></p>
<p>There are some concerns with this approach - anyone can read your passwords over your shoulder - if you work with others you might be better off with something like pwsafe.  Also some users are concerned that the contents of the file might be written to memory, although I believe this is not the case, you should satisfy yourself as to the security of this approach, as I am certainly not qualified to advise you on this aspect.</p>
