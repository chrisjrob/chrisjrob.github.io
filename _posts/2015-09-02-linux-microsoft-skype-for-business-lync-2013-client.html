---
layout: post
title: Linux Microsoft Skype for Business / Lync 2013 Client
date: 2015-09-02 09:14:18.000000000 +01:00
type: post
published: true
status: publish
categories:
- debian
- linux
- ubuntu
tags:
- '365'
- pidgin
meta:
  publicize_google_plus_url: https://plus.google.com/112653355770650909703/posts/ThF9KftBdrZ
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '14348241538'
  _publicize_done_external: a:2:{s:7:"twitter";a:1:{i:8247381;s:55:"https://twitter.com/chrisjrob/status/639003413414457344";}s:8:"facebook";a:1:{i:8247391;s:36:"https://facebook.com/940846362624149";}}
  _publicize_done_8243466: '1'
  _wpas_done_8247381: '1'
  publicize_twitter_user: chrisjrob
  _publicize_done_8243471: '1'
  _wpas_done_8247386: '1'
  _publicize_done_8243475: '1'
  _wpas_done_8247391: '1'
  _oembed_dec284ed1966054c23adea0a1ac12f31: "{{unknown}}"
  _oembed_7c7de8bfa96057b30ade4a6287f0d72d: "{{unknown}}"
  _oembed_c4b4bc5fdb8572f036cd942d7926c30e: "{{unknown}}"
  _oembed_71cfac83cb154cc23a2bdf6f44e40694: "{{unknown}}"
  _oembed_5f6db103a814bbe6b6b0688de5391d85: "{{unknown}}"
author:
  login: chrisjrob
  email: chrisjrob@gmail.com
  display_name: chrisjrob
  first_name: ''
  last_name: ''
---
<p>I was surprised to learn that Ubuntu 14.04 can talk to Skype for Business AKA Lync 2013 using the Pidgin Instant Messaging client. The general steps were:<br />
<code># apt-get install pidgin pidgin-sipe<br />
</code><br />
<!--more--><br />
And then restart Pidgin and add a new Account. The Office Communicator is the relevant plugin, with the following parameters:</p>
<ul>
<li>Protocol: Office Communicator</li>
<li>Username: Your Office 365 or Skype for Business username - probably your email address</li>
<li>Password: Your password is obviously required - and will be stored unencrypted in the config file, so you may wish to leave this blank and enter at each login</li>
<li>Server[:Port]: Leave empty if your set-up has autodiscovery</li>
<li>Connection type: Auto</li>
<li>User Agent: UCCAPI/15.0.4420.1017 OC/15.0.4420.1017</li>
<li>Authentication scheme: TLS-DSK</li>
</ul>
<p>I am unclear why the user agent is required, and whether that will need to change from time to time or not. So far it has worked fine here.</p>
<p>Unfortunately a few days ago the above set-up stopped working, with "Failed to authenticate with server". It seems that you must now use version 1.20 of the Sipe plugin, which fixes "Office365 rejects RC4 in TLS-DSK". As this version was only completed three days ago, it is not yet available in any of the Ubuntu repositories that I have been able to find, you will probably have to compile yourself.</p>
<p>Broadly speaking I followed these key stages:</p>
<ol>
<li>Install build tools if you don't already have them (apt-get install build-essential).</li>
<li>Install checkinstall if you don't already have it (apt-get install checkinstall).</li>
<li><a href="http://sourceforge.net/projects/sipe/files/sipe/pidgin-sipe-1.20.0/pidgin-sipe-1.20.0.tar.gz/download">Download source files</a>.</li>
<li>Extract source.</li>
<li>Change into source directory.</li>
<li>Read carefully the README file in the source directory.</li>
<li>Installed dependencies listed in the README:</li>
</ol>
<p><code># apt-get install libpurple-dev libtool intltool pkg-config libglib2.0-dev \<br />
libxml2-dev libnss3-dev libssl-dev libkrb5-dev libnice-dev libgstreamer0.10-dev<br />
</code></p>
<p>These dependencies may change over time, and your particular requirements may be different from mine, so please read the README and that information should take precedence.</p>
<p>Lastly, as an ordinary user, you should now be able to compile. If it fails at any stage, simply read the error and install the missed dependancy.</p>
<p><code>$ ./configure --prefix=/usr<br />
$ make<br />
$ sudo checkinstall<br />
</code></p>
<p>I found checkinstall was pre-populated with sensible settings, and I was able to continue without making any changes. Once complete a Debian package will have been created in the current directory, but it will have already been installed for you.</p>
<p>For some reason I found that at this stage Pidgin would no longer run, as it was now named /usr/bin/pidgin.orig instead of /usr/bin/pidgin, I tried removing and reinstalling pidgin but to no avail. In the end I created a symlink (ln -s /usr/bin/pidgin.orig /usr/bin/pidgin), but you should not do this unless you experience the same issue. If you know the reason for this I would be delighted to receive your feedback, as this isn't a problem that I have come across before.</p>
<p>Restarting Pidgin and the Office Communicator sprung into life once more. Sadly I would imagine that this won't be the last time this plugin will break, such are the vagaries of connecting to closed proprietary networks.</p>
