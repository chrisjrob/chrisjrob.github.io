---+ LTSP5 Local Devices

<<<---
%TOC%
<<<---

---++ Introduction

You've inserted a disk or memory stick in your thin client, and nothing happened, what next?

---++ Check lts.conf

Each user you wish to be able to access their local devices needs LOCALDEV = True in lts.conf, alternatively you may add to the '[default]' section to make this global.

%RAW%
<pre>
[192.168.1.198]
# Joe Bloggs Desktop
    LOCALDEV             = True
</pre>
%RAW%

---++ Check user is in fuse group

%RAW%
<pre>
# groups userid
userid satff users audio fuse
</pre>
%RAW%

If they are not in the fuse group then:

%RAW%
<pre>
# adduser userid fuse
</pre>
%RAW%

---++ Check lts.conf settings are reaching client

A simple typo can mean that your carefully crafted lts.conf file is not reaching its target audience.  To test, boot up the thin client and ctrl+alt+f1 to get to the console, login as root and type the following:

See LTSP Client Root Password if you are unable to log into the client.

%RAW%
<pre>
# getltscfg -a
</pre>
%RAW%

This will give you a list of all the settings that apply to this particular client, including any default settings.  You need to check that you can see the above LOCALDEV="True" is visible.

---++ Check logs on client

%RAW%
<pre>
# tail -f /var/log/syslog
</pre>
%RAW%

Then try inserting the device, and you should see the detection - look for errors that might indicate what has gone wrong.

---++ Check UDEV can see drive

Still on the client:

%RAW%
<pre>
# udevadm info -q all -n sda1
</pre>
%RAW%

Replace sda1 with the required device, e.g. sr0 for a cdrom etc.

%RAW%
<pre>
P: /block/sda/sda1
N: sda1
S: block/8:1
S: disk/by-id/usb-USB_DISK_2.0_J68J5KQHN7TQ0H7G-0:0-part1
S: disk/by-path/pci-0000:00:1d.7-usb-0:2:1.0-scsi-0:0:0:0-part1
S: disk/by-uuid/99B8-E4E6
S: disk/by-label/PKBACK#\x20001
E: ID_VENDOR=USB
E: ID_MODEL=DISK_2.0
E: ID_REVISION=1219
E: ID_SERIAL=USB_DISK_2.0_J68J5KQHN7TQ0H7G-0:0
E: ID_SERIAL_SHORT=J68J5KQHN7TQ0H7G
E: ID_TYPE=disk
E: ID_INSTANCE=0:0
E: ID_BUS=usb
E: ID_PATH=pci-0000:00:1d.7-usb-0:2:1.0-scsi-0:0:0:0
E: ID_FS_USAGE=filesystem
E: ID_FS_TYPE=vfat
E: ID_FS_VERSION=FAT16
E: ID_FS_UUID=99B8-E4E6
E: ID_FS_UUID_ENC=99B8-E4E6
E: ID_FS_LABEL=PKBACK# 001
E: ID_FS_LABEL_ENC=PKBACK#\x20001
E: ID_FS_LABEL_SAFE=PKBACK#_001
</pre>
%RAW%

An example of a CDROM:

%RAW%
<pre>
P: /block/sr0
N: sr0
S: block/11:0
S: scd0
S: disk/by-path/pci-0000:00:1f.2-scsi-1:0:0:0
S: cdrom
S: cdrw
S: dvd
S: dvdrw
E: ID_CDROM=1
E: ID_CDROM_CD_R=1
E: ID_CDROM_CD_RW=1
E: ID_CDROM_DVD=1
E: ID_CDROM_DVD_R=1
E: ID_CDROM_DVD_RW=1
E: ID_CDROM_DVD_RAM=1
E: ID_CDROM_DVD_PLUS_R=1
E: ID_CDROM_DVD_PLUS_RW=1
E: ID_CDROM_DVD_PLUS_R_DL=1
E: ID_CDROM_MRW=1
E: ID_CDROM_MRW_W=1
E: ID_PATH=pci-0000:00:1f.2-scsi-1:0:0:0
</pre>
%RAW%

---++ Check ltspfs is installed on the server

%RAW%
<pre>
# dpkg -l ltspfs | grep ^ii
ii  ltspfs                                       0.6-1~bpo50+1                        Fuse based remote filesystem for LTSP thin clients
</pre>
%RAW%

---++ Check fuse is running

%RAW%
<pre>
# lsmod | grep fuse
fuse                   47124  3 
</pre>
%RAW%

If fuse is not running, then:

%RAW%
<pre>
# echo fuse >> /etc/modules
# modprobe fuse
# adduser USER fuse
</pre>
%RAW%

---++ KDE Desktop Icons

   * {Local Device Icons on KDE Desktop}

---++ References

For some additional troubleshooting, try: http://wiki.ubuntu.com/DebugLocalDev

